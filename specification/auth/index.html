
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://amitv-innovaccer.github.io/Healthcare-MCP/specification/auth/" rel="canonical"/>
<link href="../context/" rel="prev"/>
<link href="../hmcp_auth_vs_mcp_auth/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.12" name="generator"/>
<title>Auth - Healthcare-MCP Docs</title>
<link href="../../assets/stylesheets/main.2afb09e1.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#authentication-authorization-scopes">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Healthcare-MCP Docs" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Healthcare-MCP Docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Healthcare-MCP Docs
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Auth
            
          </span>
</div>
</div>
</div>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        
  
  
    
  
  Home

      </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../">
          
  
  
  Specification

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../hmcp_python_sdk/">
          
  
  
  SDK

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../tutorial/">
          
  
  
  Tutorial

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Healthcare-MCP Docs" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Healthcare-MCP Docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Healthcare-MCP Docs
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-ellipsis">
    Specification
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Specification
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../context/">
<span class="md-ellipsis">
    Context
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Auth
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Auth
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#authentication-flows">
<span class="md-ellipsis">
      Authentication Flows
    </span>
</a>
<nav aria-label="Authentication Flows" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-oauth-20-authorization-code-flow-user-mediated">
<span class="md-ellipsis">
      1. OAuth 2.0 Authorization Code Flow (User-Mediated)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-client-credentials-flow-service-to-service">
<span class="md-ellipsis">
      2. Client Credentials Flow (Service-to-Service)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scopes-in-hmcp">
<span class="md-ellipsis">
      Scopes in HMCP
    </span>
</a>
<nav aria-label="Scopes in HMCP" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#scope-format">
<span class="md-ellipsis">
      Scope Format
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-scopes">
<span class="md-ellipsis">
      Standard Scopes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#patient-context-in-scopes">
<span class="md-ellipsis">
      Patient Context in Scopes
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#openid-connect-integration">
<span class="md-ellipsis">
      OpenID Connect Integration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#jwt-format-and-claims">
<span class="md-ellipsis">
      JWT Format and Claims
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#token-storage-and-security">
<span class="md-ellipsis">
      Token Storage and Security
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hmcp_auth_vs_mcp_auth/">
<span class="md-ellipsis">
    HMCP Auth vs MCP Auth
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../guardrails/">
<span class="md-ellipsis">
    Guardrails
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sampling/">
<span class="md-ellipsis">
    Sampling
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    SDK
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            SDK
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../hmcp_python_sdk/">
<span class="md-ellipsis">
    HMCP Python SDK
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../examples/">
<span class="md-ellipsis">
    HMCP Examples
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Tutorial
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/01_hmcp_server_/">
<span class="md-ellipsis">
    01 HMCP Server
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/02_hmcp_client_/">
<span class="md-ellipsis">
    02 HMCP Client
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/03_authentication__oauth___jwt__/">
<span class="md-ellipsis">
    03 Authentication (OAuth &amp; JWT)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/04_sampling_functionality_/">
<span class="md-ellipsis">
    04 Sampling Functionality
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/05_guardrails_/">
<span class="md-ellipsis">
    05 Guardrails
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/06_auth_configuration_/">
<span class="md-ellipsis">
    06 Auth Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../tutorial/07_jwt_handler_/">
<span class="md-ellipsis">
    07 JWT Handler
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#authentication-flows">
<span class="md-ellipsis">
      Authentication Flows
    </span>
</a>
<nav aria-label="Authentication Flows" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-oauth-20-authorization-code-flow-user-mediated">
<span class="md-ellipsis">
      1. OAuth 2.0 Authorization Code Flow (User-Mediated)
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-client-credentials-flow-service-to-service">
<span class="md-ellipsis">
      2. Client Credentials Flow (Service-to-Service)
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#scopes-in-hmcp">
<span class="md-ellipsis">
      Scopes in HMCP
    </span>
</a>
<nav aria-label="Scopes in HMCP" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#scope-format">
<span class="md-ellipsis">
      Scope Format
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#standard-scopes">
<span class="md-ellipsis">
      Standard Scopes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#patient-context-in-scopes">
<span class="md-ellipsis">
      Patient Context in Scopes
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#openid-connect-integration">
<span class="md-ellipsis">
      OpenID Connect Integration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#jwt-format-and-claims">
<span class="md-ellipsis">
      JWT Format and Claims
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#token-storage-and-security">
<span class="md-ellipsis">
      Token Storage and Security
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="authentication-authorization-scopes">Authentication, Authorization &amp; Scopes</h1>
<p>HMCP adopts the SMART on FHIR authentication and authorization framework, which builds upon OAuth 2.0 and OpenID Connect standards to provide secure, standardized access to healthcare data.</p>
<h2 id="authentication-flows">Authentication Flows</h2>
<p>HMCP supports two primary authentication flows:</p>
<h3 id="1-oauth-20-authorization-code-flow-user-mediated">1. OAuth 2.0 Authorization Code Flow (User-Mediated)</h3>
<p>Used when an application needs to access data on behalf of a user. This flow requires user consent and authentication.</p>
<div class="mermaid">sequenceDiagram
    participant User
    participant HMCP_Client as HMCP Client App
    participant Auth_Server as Authorization Server
    participant HMCP_Server as HMCP Server

    User-&gt;&gt;HMCP_Client: Open Application
    HMCP_Client-&gt;&gt;Auth_Server: Authorization Request (1)
    Note right of HMCP_Client: GET /authorize?<br/>response_type=code<br/>client_id=CLIENT_ID<br/>redirect_uri=REDIRECT_URI<br/>scope=REQUESTED_SCOPES<br/>state=STATE<br/>audience=HMCP_SERVER_URI<br/>aud=HMCP_SERVER_URI
    Auth_Server-&gt;&gt;User: Display Authorization Request (2)
    User-&gt;&gt;Auth_Server: Authenticate &amp; Approve Access (3)
    Auth_Server-&gt;&gt;HMCP_Client: Authorization Response (4)
    Note right of Auth_Server: REDIRECT_URI?<br/>code=AUTH_CODE<br/>state=STATE
    HMCP_Client-&gt;&gt;Auth_Server: Token Request (5)
    Note right of HMCP_Client: POST /token<br/>grant_type=authorization_code<br/>code=AUTH_CODE<br/>redirect_uri=REDIRECT_URI<br/>client_id=CLIENT_ID<br/>client_secret=CLIENT_SECRET
    Auth_Server-&gt;&gt;HMCP_Client: Token Response (6)
    Note right of Auth_Server: {<br/>"access_token":"ACCESS_TOKEN",<br/>"token_type":"bearer",<br/>"expires_in":3600,<br/>"scope":"GRANTED_SCOPES",<br/>"id_token":"ID_TOKEN", // If OpenID Connect<br/>"patient":"PATIENT_ID" // If patient context requested<br/>}
    HMCP_Client-&gt;&gt;HMCP_Server: API Request with Access Token (7)
    Note right of HMCP_Client: GET /api/resource<br/>Authorization: Bearer ACCESS_TOKEN
    HMCP_Server-&gt;&gt;HMCP_Client: API Response (8)
</div>
<h3 id="2-client-credentials-flow-service-to-service">2. Client Credentials Flow (Service-to-Service)</h3>
<p>Used for server-to-server authentication with no user involvement, typically with additional security like mTLS.</p>
<div class="mermaid">sequenceDiagram
    participant Client_Service as Client Service
    participant Auth_Server as Authorization Server
    participant HMCP_Server as HMCP Server

    Client_Service-&gt;&gt;Auth_Server: Token Request (1)
    Note right of Client_Service: POST /token<br/>grant_type=client_credentials<br/>client_id=CLIENT_ID<br/>client_secret=CLIENT_SECRET<br/>scope=REQUESTED_SCOPES
    Auth_Server-&gt;&gt;Client_Service: Token Response (2)
    Note right of Auth_Server: {<br/>"access_token":"ACCESS_TOKEN",<br/>"token_type":"bearer",<br/>"expires_in":3600,<br/>"scope":"GRANTED_SCOPES"<br/>}
    Client_Service-&gt;&gt;HMCP_Server: API Request with Access Token (3) 
    Note right of Client_Service: POST /api/resource<br/>Authorization: Bearer ACCESS_TOKEN
    HMCP_Server-&gt;&gt;Client_Service: API Response (4)
</div>
<h2 id="scopes-in-hmcp">Scopes in HMCP</h2>
<p>HMCP uses scopes to control access permissions, following SMART on FHIR conventions:</p>
<h3 id="scope-format">Scope Format</h3>
<p>Scopes follow this format pattern:
<div class="highlight"><pre><span></span><code>[patient/][(read|write)].[resource]
</code></pre></div></p>
<p>Where:
- <code>patient/</code> prefix (optional): Restricts access to resources associated with the current patient context
- <code>read</code> or <code>write</code>: Indicates permission level
- <code>resource</code>: Specifies the resource type or action allowed</p>
<h3 id="standard-scopes">Standard Scopes</h3>
<table>
<thead>
<tr>
<th>Scope</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hmcp:access</code></td>
<td>Basic access to HMCP services</td>
</tr>
<tr>
<td><code>hmcp:read</code></td>
<td>Read access to HMCP resources</td>
</tr>
<tr>
<td><code>hmcp:write</code></td>
<td>Write access to HMCP resources</td>
</tr>
<tr>
<td><code>patient/hmcp:read</code></td>
<td>Read access limited to the current patient context</td>
</tr>
<tr>
<td><code>patient/hmcp:write</code></td>
<td>Write access limited to the current patient context</td>
</tr>
<tr>
<td><code>openid</code></td>
<td>Authentication using OpenID Connect</td>
</tr>
<tr>
<td><code>profile</code></td>
<td>Access to basic user profile information</td>
</tr>
<tr>
<td><code>launch/patient</code></td>
<td>Request patient context at launch time</td>
</tr>
<tr>
<td><code>offline_access</code></td>
<td>Request a refresh token for offline access</td>
</tr>
</tbody>
</table>
<h3 id="patient-context-in-scopes">Patient Context in Scopes</h3>
<p>For patient-specific operations, HMCP supports patient-context scopes. When using patient-context scopes:</p>
<ol>
<li>The client requests both the resource scope with the <code>patient/</code> prefix and the <code>launch/patient</code> scope</li>
<li>The authorization server includes a <code>patient</code> parameter in the token response containing the patient ID</li>
<li>All operations using that token are automatically restricted to the specified patient</li>
</ol>
<h2 id="openid-connect-integration">OpenID Connect Integration</h2>
<p>HMCP supports OpenID Connect for authentication with these features:</p>
<ol>
<li><strong>ID Token</strong>: Contains claims about user authentication and basic user identity</li>
<li><strong>UserInfo Endpoint</strong>: Provides additional user attributes when requested</li>
<li><strong>Standard Claims</strong>: Includes SMART on FHIR and healthcare-specific claims in tokens</li>
</ol>
<p>To use OpenID Connect, include the <code>openid</code> scope in the authorization request along with any additional profile scopes.</p>
<h2 id="jwt-format-and-claims">JWT Format and Claims</h2>
<p>HMCP access tokens are JWTs with these standard claims:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://authorization-server.example.com"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"sub"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user-or-client-id"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://hmcp-server.example.com"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1656086400</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1656082800</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hmcp:read patient/hmcp:write"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"patient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"tenant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"organization-id"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"acr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"level-of-assurance"</span><span class="p">,</span>
<span class="w">  </span><span class="nt">"fhirUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Practitioner/789"</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="token-storage-and-security">Token Storage and Security</h2>
<p>Clients must securely store tokens following these guidelines:</p>
<ol>
<li>Store access tokens in memory when possible, not in localStorage or cookies</li>
<li>For native apps, use secure operating system credential storage</li>
<li>Use refresh tokens to obtain new access tokens instead of long-lived tokens</li>
<li>Implement proper token validation on both client and server sides</li>
<li>Verify all claims, including audience (<code>aud</code>) and issuer (<code>iss</code>)</li>
</ol>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "search.highlight", "search.suggest"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>